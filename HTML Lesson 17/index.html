<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Feedback</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <h1>Course Feedback</h1>

    <div class="container">
        <form id="form">

            <label for="fname">First Name</label>
            <input type="text" id="fname" name="firstname" placeholder="Your name...">

            <label for="lname">Last Name</label>
            <input type="text" id="lname" name="lastname" placeholder="Your last name...">

            <label for="course">Course</label>
            <select id="course" name="course">
            </select>

            <label for="feedback">Feedback</label>
            <textarea id="feedback" name="feedback" placeholder="Write something..." style="height:200px"></textarea>

            <input type="submit" value="Submit" id="submitButton">

        </form>
    </div>

    <script>

    document.addEventListener('DOMContentLoaded', function() {
    
    const form = document.getElementById('form')

    form.addEventListener('submit', function (e) {
        e.preventDefault();

        const payload = new FormData(form);

        fetch('http://httpbin.org/post', {
            method: "POST",
            body: payload,
        })
        .then(res => {
            if (res.ok) {
                return res.json(); // Only parse JSON if response is ok
            } else {
                throw new Error('Network response was not ok.');
            }
        })
        .then(data => {
            alert('Feedback Submitted');
            console.log(data);
        })
        .catch(err => {
            console.log(err);
            alert('Failed to Submit Feedback');
        });
    });

    function populateCourses() {
        const courseSelect = document.getElementById('course');

        // Replace this URL with the actual URL to fetch courses
        fetch('response.json')
        .then(response => response.json())
        .then(courses => {
            courses.forEach(course => {
                const option = document.createElement('option');
                option.value = course.id;
                option.textContent = course.name;
                courseSelect.appendChild(option);
            });
        })
        .catch(error => {
            console.error('Error fetching courses:', error);
        });
    }

    populateCourses();
});

    </script>

</body>

</html>